<div class="bg-gray mb-6 jumbotron px-3">

  <h3 class="container-md text-center alt-h1 text-gray mb-6">
    <% if @user_is_current %>
      You have joined<br>Open Source Friday!
    <% else %>
      <a href="https://github.com/<%= @nickname %>"><%= @name_or_nickname %></a> has
      <% if @user_exists %>
        joined Open Source Friday!
      <% else %>
        not joined Open Source Friday (yet).
      <% end %>
    <% end %>
  </h3>

  <div class="container-md mx-auto d-flex flex-column flex-sm-row flex-justify-between">
    <div class="col-sm-3 mb-4">
      <img class="avatar rounded-2 img-responsive" src="<%= @avatar %>&s=400">
    </div>

    <div class="col-sm-7">
      <p class="text-gray mb-4">
        <% if @name %>
          <span class="d-inline-block mr-3"><%= octicon("mark-github") %> <a href="https://github.com/<%= @nickname %>"><%= @nickname %></a></span>
        <% end %>

        <% if @company %>
          <span class="d-inline-block mr-3"><%= octicon("organization") %>
            <% if @company.start_with?("@") %>
              <a href="https://github.com/<%= @company.sub("@", "") %>"><%= @company %></a>
            <% else %>
              <%= @company %>
            <% end %>
          </span>
        <% end %>

        <% if @location %>
          <span class="d-inline-block mr-3"><%= octicon("location") %> <%= @location %></span>
        <% end %>

        <% if @homepage %>
          <span class="d-inline-block"><%= octicon("external-link") %> <%= @homepage %></span>
        <% end %>
      </p>

      <p class="text-gray mb-4">
        <%= @bio %>
      </p>

      <% @orgs.each do |org| %>
        <a href="https://github.com/<%= org[:name] %>"><img alt="<%= org[:name] %>" class="avatar-small avatar-link mr-4 rounded-1" src="<%= org[:avatar] %>&s=80" width="40" height="40"></a>
      <% end %>
    </div>
  </div>
  <% if @user_is_current %>
    <div class="mt-6 border-top container-md ">
      <% page_url = "https://opensourcefriday.com/users/#{@nickname}" %>
      <h2 class="alt-h2 text-center mt-6 mb-4">
        What should I do now?
      </h2>

      <div class="d-flex flex-column flex-md-row flex-justify-between text-center">
        <div class="col-md-3">
          <%= octicon 'squirrel', class: 'd-block mb-2 mx-auto text-blue', width: 28 %>
          <h3 class="alt-h3 mb-1">
            Make your first contribution
          </h3>
          <p><a href="https://opensource.guide/how-to-contribute/#finding-a-project-to-contribute-to">Find a project</a> to contribute to, or learn <a href="https://opensource.guide/how-to-contribute/">how to make your first pull request</a>.</p>
        </div>

        <div class="col-md-3">
          <%= octicon 'smiley', class: 'd-block mb-2 mx-auto text-blue', height: 28 %>
          <h3 class="alt-h3 mb-1">Tell your friends</h3>
          <p class="text-gray">
            Share
            <% if @prs_and_events.empty? %>
              <% tweet = "I'm contributing to open source on #OpenSourceFriday: https://opensourcefriday.com. Join me!" %>
              Open Source Friday
            <% else %>
              <% tweet = "Check out my contributions to open source on #OpenSourceFriday: #{page_url}" %>
              your Open Source Friday contributions
            <% end %>
            with others <a href="<%= page_url %>">using this URL</a>.
          </p>
          <p><%= render partial: 'layouts/twitter', locals: { tweet: tweet } %></p>
        </div>
        <div class="col-md-3">
          <%= octicon 'calendar', class: 'd-block mb-2 mx-auto text-blue', width: 28 %>
          <%= render 'layouts/calendar' %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="container-md py-6 py-3 px-3">
  <% if @user_exists %>

  <h3 class="alt-h3 col-md-11 mb-5 mx-auto text-center">
  <% if @prs_and_events.empty? %>
    No Friday pull requests or events in the last 3 months.
  <% else %>
    <%= @prs_count %> Friday pull <%= "request".pluralize(@prs_count) %> in the last 3 months<%= " (incomplete list)" if @prs_incomplete %><%= " and <br>#{@events_count} Friday events in their last 1,000 events".html_safe unless @events.empty? %>:
  <% end %>
  </h3>
  <div class="col-md-8 mb-4 mx-auto">
    <% @prs_and_events.each do |date, prs_and_events| %>
    <h3 class="h4 mt-2"><%= date.to_formatted_s(:long) %></h3>
    <% prs_and_events.each do |pr_or_event| %>
    <ul>
      <li>
        <a href="https://github.com/<%= pr_or_event[:repo] %>">
          <%= pr_or_event[:repo] %>
        </a>:
        <a href="<%= pr_or_event[:url] %>"><%= pr_or_event[:title] %></a>
      </li>
    </ul>
    <% end %>
    <% end %>
  </div>
  <% end %>
</div>
